{% extends "layout.html" %}

{% block head %}
<title>initsearh</title>
<link href="static/css/index.css" rel="stylesheet" type="text/css" />
<script src="static/node_modules/jquery/dist/jquery.min.js"></script>
<meta charset="utf-8">
{% endblock %}

<script type="text/javascript">
    var test;
    function onload() {
        test = document.getElementById('search');
    }
    function clickedAllData() {
        location.href = 'http://data.avert.ie/values/!http://rdfs.org/sioc/ns%23container_of///';
    }
</script>

{% block main %}
<div id="boxes">
    <div id="leftbox" style="background-color: aliceblue;">
        <form action="{% url 'gengraph' %}" method="POST">
            {% csrf_token %}
            <label for="patientid">Get Patient:</label>
            <input type="text" name="patientid" id="patientid">
            <button type="submit" class="btn btn-primary btn-sm">Go</button>
        </form>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" rel="stylesheet" />
        <div class="table-responsive">
            <table id="classes" class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Classes</th>
                    </tr>
                </thead>
                <tbody>
                    {% if classes %}
                    {% for class in classes %}
                    <tr ondragover="drag_over(event)" ondrop="drop(event)" >
                        <form action="/nodegraph" method="POST">
                            <td><h7>
                                <span style="position:absolute;" draggable="true" ondragstart="drag_start(event)" class="classname" id="{{ class }}">
                                    {{ class }}</span></h7>
                            </td>
                        </form>
                    </tr>
                    {% endfor %}
                    {% endif %}
                </tbody>
            </table>
            <table id="header-fixed" class="table table-striped table-hover"></table>
        </div>
    </div>

    <div ondragover="drag_over(event)" ondrop="drop(event)" id="middlebox" style="display: inline-block; background-color: azure;" class="dropzone">
        {% if mainnode %}
        {% endif %}
    </div>

    <div id="rightbox" style="background-color:aliceblue;">
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <form action="/">
            <button type="submit" onclick="" style="float: right" class="btn"><i class="fa fa-home"></i> Home</button>
        </form>
        <p> FILTER </p>
    </div>
</div>

<script>
    function drag_start(event) {
        var style = window.getComputedStyle(event.target, null);
        var str = (parseInt(style.getPropertyValue("left")) - event.clientX) + ',' + (parseInt(style.getPropertyValue("top")) - event.clientY) + ',' + event.target.id;
        event.dataTransfer.setData("Text", str);
    }

    function drop(event) {
        var offset = event.dataTransfer.getData("Text").split(',');
        var dm = document.getElementById(offset[2]);
        dm.style.left = (event.clientX + parseInt(offset[0], 10)) + 'px';
        dm.style.top = (event.clientY + parseInt(offset[1], 10)) + 'px';
        event.preventDefault();
        return false;
    }

    function drag_over(event) {
        event.preventDefault();
        return false;
    }
    // function allowDrop(ev) {
    //     ev.preventDefault();
    // }

    // function drag(ev) {
    //     ev.dataTransfer.setData("text", ev.target.id);
    // }

    // function drop(ev) {
    //     ev.preventDefault();
    //     var data = ev.dataTransfer.getData("text");
    //     ev.target.appendChild(document.getElementById(data));
    // }
</script>
{% endblock %}