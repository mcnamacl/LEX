{% extends "layout.html" %}

{% block head %}
<title>initsearh</title>
<link href="static/css/index.css" rel="stylesheet" type="text/css" />
<script src="static/node_modules/jquery/dist/jquery.min.js"></script>
<meta name="viewport" content="initial-scale=1.0">
<meta charset="utf-8">
{% endblock %}

<script type="text/javascript">
    var test;
    function onload() {
        test = document.getElementById('search');
    }
    function clickedAllData() {
        location.href = 'http://data.avert.ie/values/!http://rdfs.org/sioc/ns%23container_of///';
    }
</script>

{% block main %}
<div id="boxes">
    <div id="leftbox" style="background-color: aliceblue;">
        <form action="{% url 'gengraph' %}" method="POST">
            {% csrf_token %}
            <label for="patientid">Get Patient:</label>
            <input type="text" name="patientid" id="patientid">
            <button type="submit" class="btn btn-primary btn-sm">Go</button>
        </form>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" rel="stylesheet" />
        <div class="table-responsive">
            <table id="classes" class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Classes</th>
                    </tr>
                </thead>
                <tbody>
                    {% if classes %}
                    {% for class in classes %}
                    <tr ondrop="drop(event)" ondragover="allowDrop(event)">
                        <form action="/nodegraph" method="POST">
                            <td><div draggable="true" ondragstart="drag(event)" id="{{ class }}">{{ class }}</div></td>
                        </form>
                    </tr>
                    {% endfor %}
                    {% endif %}
                </tbody>
            </table>
            <table id="header-fixed" class="table table-striped table-hover"></table>
        </div>
    </div>
    <div id="middlebox" style="display: inline-block; background-color: azure;" ondrop="drop(event)" ondragover="allowDrop(event)">
        {% if mainnode %}
        {% endif %}
    </div>
    <div id="rightbox" style="background-color:aliceblue;">
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <form action="/">
            <button type="submit" onclick="" style="float: right" class="btn"><i class="fa fa-home"></i> Home</button>
        </form>
        <p> FILTER </p>
    </div>
</div>

<script>

// function dragElement(elmnt) {
//   var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
//   if (document.getElementById(elmnt.id + "header")) {
//     /* if present, the header is where you move the DIV from:*/
//     document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
//   } else {
//     /* otherwise, move the DIV from anywhere inside the DIV:*/
//     elmnt.onmousedown = dragMouseDown;
//   }

//   function dragMouseDown(e) {
//     e = e || window.event;
//     e.preventDefault();
//     // get the mouse cursor position at startup:
//     pos3 = e.clientX;
//     pos4 = e.clientY;
//     document.onmouseup = closeDragElement;
//     // call a function whenever the cursor moves:
//     document.onmousemove = elementDrag;
//   }

//   function elementDrag(e) {
//     e = e || window.event;
//     e.preventDefault();
//     // calculate the new cursor position:
//     pos1 = pos3 - e.clientX;
//     pos2 = pos4 - e.clientY;
//     pos3 = e.clientX;
//     pos4 = e.clientY;
//     // set the element's new position:
//     elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
//     elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
//   }

//   function closeDragElement() {
//     /* stop moving when mouse button is released:*/
//     document.onmouseup = null;
//     document.onmousemove = null;
//   }
// }
    function allowDrop(ev) {
        ev.preventDefault();
    }

    function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        ev.target.appendChild(document.getElementById(data));
    }
</script>
{% endblock %}